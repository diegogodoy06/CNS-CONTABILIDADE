# Plataforma de Gest√£o Cont√°bil Digital

## Documento de Requisitos v2.0

---

## 1. Vis√£o Geral do Produto

### 1.1 Prop√≥sito
A Plataforma de Gest√£o Cont√°bil Digital √© uma solu√ß√£o SaaS voltada para pequenas empresas que necessitam de servi√ßos cont√°beis simplificados, oferecendo autoatendimento para tarefas rotineiras e acesso facilitado a documentos fiscais, emiss√£o de notas fiscais e gest√£o tribut√°ria.

### 1.2 Modelo de Neg√≥cio
- **P√∫blico-alvo**: Empresas de pequeno porte (MEI, ME, EPP)
- **Modelo**: Plataforma white-label para escrit√≥rios de contabilidade
- **Monetiza√ß√£o**: Assinatura mensal por empresa cliente
- **Diferencial**: Simplifica√ß√£o radical (2-3 cliques para a√ß√µes principais)

### 1.3 Princ√≠pios do Design
- **Simplicidade**: M√°ximo 3 cliques para qualquer a√ß√£o
- **Autonomia**: Cliente realiza 80% das opera√ß√µes sem intermedia√ß√£o
- **Transpar√™ncia**: Informa√ß√µes fiscais e tribut√°rias claras
- **Disponibilidade**: 99.5% de uptime garantido
- **Seguran√ßa**: Conformidade com LGPD e normas do CFC

---

## 2. Arquitetura do Sistema

### 2.1 Stack Tecnol√≥gica

#### Frontend
- **Framework**: React 18+ com TypeScript
- **UI Library**: Material-UI (MUI) v5
- **State Management**: Redux Toolkit + RTK Query
- **Routing**: React Router v6
- **Forms**: React Hook Form + Yup
- **Charts**: Recharts ou Chart.js
- **HTTP Client**: Axios com interceptors

#### Backend
- **API REST**: Node.js + Express.js
- **ORM**: Prisma ou Sequelize
- **Autentica√ß√£o**: JWT + Refresh Tokens
- **Valida√ß√£o**: Joi ou Zod
- **Queue**: Bull (Redis)
- **Storage**: AWS S3 ou MinIO
- **Email**: SendGrid ou AWS SES

#### Banco de Dados
- **Principal**: PostgreSQL 14+
- **Cache**: Redis 7+
- **Full-text Search**: PostgreSQL + pg_trgm (ou ElasticSearch para escala)

#### Infraestrutura
- **Containeriza√ß√£o**: Docker + Docker Compose
- **Orquestra√ß√£o**: Kubernetes (produ√ß√£o) ou Docker Swarm
- **CI/CD**: GitHub Actions ou GitLab CI
- **Monitoramento**: Prometheus + Grafana
- **Logs**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **CDN**: CloudFlare

### 2.2 Padr√µes de Arquitetura
- **Backend**: Clean Architecture + Repository Pattern
- **Frontend**: Feature-based folder structure
- **API**: RESTful com versionamento (/api/v1/)
- **Comunica√ß√£o**: Event-driven para processos ass√≠ncronos

---

## 3. M√≥dulos do Sistema

### 3.1 Autentica√ß√£o e Gest√£o de Acesso

#### RF-AUTH-001: Login Multi-fator
- Login com CNPJ + senha
- 2FA opcional via SMS/Email/App (Google Authenticator)
- Captcha ap√≥s 3 tentativas falhas
- Bloqueio tempor√°rio ap√≥s 5 tentativas (15 minutos)
- IP whitelisting opcional para contas corporativas

#### RF-AUTH-002: Gest√£o de Sess√µes
- Sess√£o com dura√ß√£o configur√°vel (padr√£o: 4 horas)
- Refresh token com validade de 30 dias
- Logout autom√°tico por inatividade (30 minutos)
- Device fingerprinting para detec√ß√£o de acessos suspeitos
- Notifica√ß√£o de login em novo dispositivo

#### RF-AUTH-003: Recupera√ß√£o de Senha
- Reset via email com token expir√°vel (1 hora)
- Valida√ß√£o de CPF do respons√°vel legal
- Hist√≥rico de senhas (n√£o permitir √∫ltimas 5)
- For√ßa de senha: m√≠nimo 8 caracteres, mai√∫sculas, min√∫sculas, n√∫meros e s√≠mbolos

#### RF-AUTH-004: Gest√£o de Usu√°rios por Empresa
- M√∫ltiplos usu√°rios por empresa (limite por plano)
- Perfis: Administrador, Operador, Visualizador
- Convite via email com aceite obrigat√≥rio
- Auditoria de a√ß√µes por usu√°rio
- Desativa√ß√£o de usu√°rio (n√£o exclus√£o f√≠sica)

#### Matriz de Permiss√µes

| Funcionalidade | Administrador | Operador | Visualizador |
|----------------|---------------|----------|--------------|
| Emitir NF-e | ‚úÖ | ‚úÖ | ‚ùå |
| Simular NF-e | ‚úÖ | ‚úÖ | ‚úÖ |
| Upload documentos | ‚úÖ | ‚úÖ | ‚ùå |
| Download documentos | ‚úÖ | ‚úÖ | ‚úÖ |
| Gerenciar tomadores | ‚úÖ | ‚úÖ | ‚ùå |
| Visualizar guias | ‚úÖ | ‚úÖ | ‚úÖ |
| Baixar guias | ‚úÖ | ‚úÖ | ‚úÖ |
| Gerenciar usu√°rios | ‚úÖ | ‚ùå | ‚ùå |
| Configura√ß√µes empresa | ‚úÖ | ‚ùå | ‚ùå |

---

### 3.2 Dashboard

#### RF-DASH-001: Painel Principal
**Widgets Obrigat√≥rios:**
- üìä **Resumo Financeiro do M√™s**
  - Faturamento total
  - Impostos a recolher
  - Margem l√≠quida estimada
  - Comparativo com m√™s anterior

- üìÑ **Notas Fiscais**
  - Total emitidas no m√™s
  - Aguardando emiss√£o (rascunhos)
  - Canceladas
  - Gr√°fico de evolu√ß√£o (√∫ltimos 6 meses)

- üí≥ **Guias e Obriga√ß√µes**
  - Vencendo em 7 dias (destaque vermelho)
  - Vencidas (alerta cr√≠tico)
  - Pagas no m√™s
  - Pr√≥ximas obriga√ß√µes acess√≥rias

- üìÅ **Documentos Recentes**
  - √öltimos 5 documentos adicionados
  - Badge "Novo" para n√£o visualizados
  - Acesso r√°pido por categoria

- üîî **Central de Notifica√ß√µes**
  - Alertas pendentes
  - Comunicados do escrit√≥rio
  - Avisos de atualiza√ß√µes regulat√≥rias

#### RF-DASH-002: Widgets Personaliz√°veis
- Drag-and-drop para reorganizar
- Ocultar/exibir widgets
- Configura√ß√µes salvas por usu√°rio

#### RF-DASH-003: Atalhos R√°pidos
- Bot√µes flutuantes (FAB) para:
  - Emitir NF-e
  - Upload de documento
  - Consultar tributos
  - Falar com contador (chat/ticket)

---

### 3.3 Gest√£o Documental

#### RF-DOC-001: Upload de Documentos
**Formatos aceitos:**
- PDF (at√© 25MB)
- Imagens: JPG, PNG, WEBP (at√© 10MB)
- Office: DOC, DOCX, XLS, XLSX (at√© 15MB)
- Compactados: ZIP, RAR (at√© 50MB)

**Regras:**
- Scan de v√≠rus obrigat√≥rio (ClamAV)
- OCR autom√°tico para PDFs (opcional)
- Extra√ß√£o de metadados (data, tipo, emissor)
- Compress√£o autom√°tica de imagens (WebP)
- Versionamento de documentos

#### RF-DOC-002: Organiza√ß√£o por Categorias

**Categorias Padr√£o:**
1. **Fiscal**
   - Notas Fiscais de Entrada
   - Notas Fiscais de Sa√≠da
   - Livros Fiscais
   - Guias de Impostos

2. **Cont√°bil**
   - Balancetes
   - DRE (Demonstra√ß√£o do Resultado)
   - Balan√ßos Patrimoniais
   - Extratos Banc√°rios

3. **Trabalhista**
   - Folhas de Pagamento
   - Rescis√µes
   - FGTS
   - E-Social

4. **Jur√≠dico**
   - Contratos Sociais
   - Altera√ß√µes Contratuais
   - Atas de Reuni√£o
   - Procura√ß√µes

5. **Operacional**
   - Contratos com Fornecedores
   - Contratos com Clientes
   - Ap√≥lices de Seguro
   - Certid√µes Negativas

6. **Certificados Digitais**
   - e-CNPJ
   - e-CPF
   - Certificados de S√≥cios

7. **Documentos Modelo** (Read-only)
   - Contratos modelo
   - Procura√ß√µes padr√£o
   - Checklists mensais
   - Guias e tutoriais

#### RF-DOC-003: Busca e Filtros
- Busca full-text por conte√∫do (OCR)
- Filtros: categoria, data, tipo, tags
- Ordena√ß√£o: mais recente, alfab√©tica, tamanho
- Busca por per√≠odo (compet√™ncia)

#### RF-DOC-004: Visualiza√ß√£o e Download
- Visualizador inline para PDF e imagens
- Convers√£o de Office para PDF (visualiza√ß√£o)
- Download individual ou em lote (ZIP)
- Compartilhamento tempor√°rio via link (24h)
- Marca d'√°gua em PDFs baixados (opcional)

#### RF-DOC-005: Controle de Acesso
- Documentos p√∫blicos (vis√≠veis para todos os usu√°rios)
- Documentos privados (apenas administrador)
- Documentos compartilhados com contador
- Log de acesso (quem visualizou/baixou e quando)

#### RF-DOC-006: Reten√ß√£o e Arquivamento
- Pol√≠tica de reten√ß√£o configur√°vel (padr√£o: 5 anos)
- Arquivamento autom√°tico de documentos antigos
- Exclus√£o l√≥gica (soft delete) com recupera√ß√£o em 30 dias
- Backup autom√°tico di√°rio (S3 Glacier)

---

### 3.4 Emiss√£o de Notas Fiscais

#### RF-NF-001: Fluxo de Emiss√£o Simplificado

**Etapa 1: Sele√ß√£o de Tomador**
- Busca r√°pida por CNPJ/CPF ou nome
- Cria√ß√£o r√°pida inline (modal)
- Importa√ß√£o de dados da Receita Federal
- √öltimos tomadores utilizados (quick access)

**Etapa 2: Dados do Servi√ßo**
- Descri√ß√£o do servi√ßo (com autocomplete de hist√≥rico)
- Valor total
- CNAE (busca inteligente com descri√ß√£o)
- C√≥digo de Tributa√ß√£o Municipal (CTM)
- Local da presta√ß√£o (munic√≠pio)
- Reten√ß√µes na fonte (IR, PIS, COFINS, CSLL, INSS)

**Etapa 3: Revis√£o e Confirma√ß√£o**
- Preview da NF-e formatada
- Resumo de tributos calculados
- Valida√ß√£o de campos obrigat√≥rios
- Salvar como rascunho ou emitir

**Etapa 4: Transmiss√£o**
- Envio para prefeitura (s√≠ncrono ou ass√≠ncrono)
- Retry autom√°tico em caso de erro (3 tentativas)
- Notifica√ß√£o de sucesso/erro
- Download autom√°tico de XML e PDF

#### RF-NF-002: Simula√ß√£o de Nota Fiscal
- Mesmo fluxo da emiss√£o, mas sem transmiss√£o
- Gera√ß√£o de PDF "simulado" (marca d'√°gua)
- C√°lculo de tributos em tempo real
- Converter simula√ß√£o em emiss√£o real (1 clique)
- Hist√≥rico de simula√ß√µes (7 dias)

#### RF-NF-003: Gest√£o de Rascunhos
- Salvar emiss√£o incompleta
- Listagem de rascunhos pendentes
- Editar, duplicar ou excluir rascunho
- Alerta de rascunhos com mais de 15 dias

#### RF-NF-004: Integra√ß√£o com Prefeituras

**Padr√£o Nacional NFS-e**
- Layout ABRASF 2.04
- Layout Nacional RFB (Decreto 10.854/2021)
- Suporte a munic√≠pios integrados (80%+ das cidades)

**Fallback para Munic√≠pios N√£o Integrados**
- Exporta√ß√£o de XML conforme layout da prefeitura
- PDF com dados preenchidos para digita√ß√£o manual
- Instru√ß√µes espec√≠ficas por munic√≠pio

**Processamento Ass√≠ncrono**
- Queue de transmiss√£o (Redis + Bull)
- Webhook de retorno da prefeitura
- Notifica√ß√£o em tempo real via WebSocket

#### RF-NF-005: Valida√ß√µes Pr√©-emiss√£o
- Certificado digital v√°lido (e-CNPJ)
- Dados cadastrais atualizados
- Situa√ß√£o ativa na Receita Federal
- Inscri√ß√£o municipal ativa
- Regime tribut√°rio compat√≠vel
- Al√≠quota de ISS configurada

#### RF-NF-006: C√°lculo de Tributos

**ISS (Imposto Sobre Servi√ßos)**
- Al√≠quota por munic√≠pio e CNAE
- Base de c√°lculo com dedu√ß√µes (quando aplic√°vel)
- Reten√ß√£o ou n√£o reten√ß√£o
- Exigibilidade (Normal, Suspensa, Isenta)

**Impostos Federais**
- IR (1,5% a 4,8% conforme faixa)
- PIS (0,65%)
- COFINS (3%)
- CSLL (1% a 2,88%)
- C√°lculo bruto ou com compensa√ß√µes

**Simples Nacional**
- Anexos III, IV e V
- C√°lculo pela tabela do Simples
- Fator "r" para anexo V
- Segrega√ß√£o de receitas

#### RF-NF-007: Hist√≥rico e Relat√≥rios

**Listagem de Notas**
- Filtros: per√≠odo, tomador, status, munic√≠pio
- Ordena√ß√£o personaliz√°vel
- Exporta√ß√£o para Excel/CSV
- Busca por n√∫mero da nota ou protocolo

**Estat√≠sticas**
- Total faturado por per√≠odo
- ISS recolhido
- Tributos retidos
- Top 10 tomadores
- Servi√ßos mais prestados

**A√ß√µes em Lote**
- Download de XMLs/PDFs (ZIP)
- Envio por email para tomador
- Cancelamento m√∫ltiplo (quando permitido)

#### RF-NF-008: Cancelamento e Substitui√ß√£o
- Cancelamento dentro do prazo legal (configurable)
- Justificativa obrigat√≥ria
- Nota de substitui√ß√£o (quando aplic√°vel)
- Hist√≥rico de cancelamentos
- Restri√ß√£o por perfil de usu√°rio

#### RF-NF-009: Envio Autom√°tico ao Tomador
- Email autom√°tico com XML e PDF anexos
- Template personaliz√°vel
- Agendamento de envio
- Log de envios

---

### 3.5 Cadastro de Tomadores

#### RF-TOM-001: Cadastro Completo

**Pessoa Jur√≠dica**
- CNPJ (valida√ß√£o com Receita Federal)
- Raz√£o Social (importa√ß√£o autom√°tica)
- Nome Fantasia
- Inscri√ß√£o Municipal
- Inscri√ß√£o Estadual
- Endere√ßo completo com CEP (autocomplete)
- Email (m√∫ltiplos)
- Telefone
- CNAE principal
- Regime tribut√°rio (Simples, Presumido, Real)

**Pessoa F√≠sica**
- CPF (valida√ß√£o)
- Nome completo
- RG
- Data de nascimento
- Endere√ßo completo
- Email
- Telefone

#### RF-TOM-002: Importa√ß√£o de Dados
- Consulta √† Receita Federal (CNPJ)
- Consulta ao SINTEGRA (Inscri√ß√£o Estadual)
- Consulta CEP (endere√ßo)
- Valida√ß√£o de email (syntax check)

#### RF-TOM-003: Gest√£o de Tomadores
- Listagem com busca e filtros
- Edi√ß√£o inline
- Desativa√ß√£o (soft delete)
- Restri√ß√£o de exclus√£o se houver notas emitidas
- Agrupamento por tag (ex: "Recorrentes", "Inativos")

#### RF-TOM-004: Hist√≥rico de Relacionamento
- Total de notas emitidas
- Faturamento total
- √öltima nota emitida
- M√©dia de valor por nota
- Servi√ßos mais contratados

---

### 3.6 Guias e Obriga√ß√µes

#### RF-GUIA-001: Cadastro de Guias

**Tipos de Guias**
- DAS (Simples Nacional)
- ISS (Imposto Sobre Servi√ßos)
- INSS (Previd√™ncia Social)
- FGTS
- IR (Imposto de Renda)
- CSLL
- PIS/COFINS
- Obriga√ß√µes Acess√≥rias (DCTF, EFD, SPED)

**Informa√ß√µes**
- Tipo de guia
- Compet√™ncia (m√™s/ano)
- Valor
- Data de vencimento
- C√≥digo de barras / linha digit√°vel
- PDF da guia
- Status (Pendente, Paga, Vencida, Parcelada)

#### RF-GUIA-002: Upload Autom√°tico pelo Escrit√≥rio
- API para escrit√≥rio enviar guias em lote
- Notifica√ß√£o autom√°tica ao cliente
- Valida√ß√£o de duplicidade (compet√™ncia + tipo)

#### RF-GUIA-003: Calend√°rio de Obriga√ß√µes
- View de calend√°rio mensal
- Marca√ß√£o de guias por status
- Filtro por tipo de obriga√ß√£o
- Lembretes configur√°veis (7, 3, 1 dia antes)

#### RF-GUIA-004: Controle de Vencimentos
- Listagem de guias vencendo em 7 dias
- Alerta visual (badge vermelho)
- Ordena√ß√£o por data de vencimento
- Flag de "Urgente" para vencimentos em 48h

#### RF-GUIA-005: Pagamento e Comprova√ß√£o
- Upload de comprovante de pagamento
- Marca√ß√£o manual como "Paga"
- Hist√≥rico de pagamentos
- Relat√≥rio de guias pagas por per√≠odo

#### RF-GUIA-006: Integra√ß√£o com Open Finance (Futuro)
- Pagamento direto via Pix
- D√©bito autom√°tico
- Concilia√ß√£o autom√°tica

---

### 3.7 Sistema de Notifica√ß√µes

#### RF-NOT-001: Tipos de Notifica√ß√µes

**Cr√≠ticas (Alerta Vermelho)**
- Guia vencida
- Certificado digital vencendo em 7 dias
- Erro na emiss√£o de NF-e
- Bloqueio de emiss√£o (problemas cadastrais)

**Importantes (Alerta Amarelo)**
- Guia vencendo em 3 dias
- Documento pendente de upload
- Rascunho de nota com mais de 15 dias
- Atualiza√ß√£o cadastral necess√°ria

**Informativas (Alerta Azul)**
- Guia vencendo em 7 dias
- Novo documento dispon√≠vel
- Comunicado do escrit√≥rio
- Nota fiscal emitida com sucesso

#### RF-NOT-002: Central de Notifica√ß√µes
- Badge com contador no menu
- Listagem ordenada por criticidade
- Marcar como lida
- Marcar todas como lidas
- Filtro por tipo
- Hist√≥rico de notifica√ß√µes (30 dias)

#### RF-NOT-003: Canais de Notifica√ß√£o
- **In-app**: Sempre ativo
- **Email**: Configur√°vel por tipo
- **SMS**: Apenas para cr√≠ticas (opcional)
- **WhatsApp**: Via API Business (futuro)
- **Push**: Para app mobile (futuro)

#### RF-NOT-004: Configura√ß√µes de Notifica√ß√£o
- Ativar/desativar por tipo
- Frequ√™ncia (instant√¢neo, di√°rio, semanal)
- Hor√°rios permitidos (n√£o perturbar)
- Usu√°rios destinat√°rios (por perfil)

---

### 3.8 Relat√≥rios e An√°lises

#### RF-REL-001: Relat√≥rios Fiscais

**Livro de Servi√ßos Prestados**
- Notas emitidas no per√≠odo
- Agrupamento por tomador, CNAE ou munic√≠pio
- Totaliza√ß√£o de impostos
- Exporta√ß√£o PDF/Excel

**Relat√≥rio de ISS**
- ISS pr√≥prio x ISS retido
- Comparativo mensal
- Gr√°fico de evolu√ß√£o
- An√°lise por al√≠quota

**Relat√≥rio de Tributos Federais**
- IR, PIS, COFINS, CSLL
- Valores retidos
- Valores a recolher
- Comparativo com per√≠odo anterior

#### RF-REL-002: Relat√≥rios Gerenciais

**DRE Simplificada**
- Receita bruta
- Dedu√ß√µes e impostos
- Receita l√≠quida
- Margem de lucro estimada

**Fluxo de Caixa Fiscal**
- Entradas (notas emitidas)
- Sa√≠das (guias pagas)
- Saldo projetado

**An√°lise de Tomadores**
- Top 10 clientes
- Faturamento por tomador
- Concentra√ß√£o de receita
- Churn (clientes inativos)

#### RF-REL-003: Dashboards Anal√≠ticos
- Gr√°ficos interativos (Recharts)
- Filtros din√¢micos
- Drill-down por dimens√£o
- Exporta√ß√£o de gr√°ficos (PNG)

---

### 3.9 Configura√ß√µes da Empresa

#### RF-CONF-001: Dados Cadastrais
- Raz√£o Social e Nome Fantasia
- CNPJ e Inscri√ß√µes (Municipal/Estadual)
- Endere√ßo completo
- Contato (telefone, email)
- Respons√°vel legal
- Regime tribut√°rio
- CNAE principal e secund√°rios
- Data de abertura

#### RF-CONF-002: Configura√ß√µes Fiscais
- Al√≠quota de ISS padr√£o
- Munic√≠pio de presta√ß√£o padr√£o
- S√©rie de NF-e
- Pr√≥ximo n√∫mero de nota
- C√≥digo de Tributa√ß√£o Municipal padr√£o
- Reten√ß√µes padr√£o (IR, PIS, COFINS, CSLL)

#### RF-CONF-003: Certificado Digital
- Upload de certificado (A1 - .pfx)
- Senha do certificado (criptografada)
- Validade do certificado
- Alerta de vencimento (30, 15, 7 dias)
- Renova√ß√£o assistida (link para AR)

#### RF-CONF-004: Integra√ß√£o com Prefeitura
- Usu√°rio e senha do portal da prefeitura
- Chave de API (quando dispon√≠vel)
- Teste de conex√£o
- Logs de integra√ß√£o

#### RF-CONF-005: Prefer√™ncias
- Logo da empresa (upload)
- Cores do sistema (white-label parcial)
- Idioma (PT-BR padr√£o)
- Fuso hor√°rio
- Formato de data e moeda

---

### 3.10 Comunica√ß√£o com o Escrit√≥rio

#### RF-COM-001: Central de Mensagens
- Chat integrado (estilo WhatsApp)
- Anexo de arquivos (at√© 10MB)
- Hist√≥rico de conversas
- Status: Enviado, Lido, Respondido
- Notifica√ß√£o para contador

#### RF-COM-002: Sistema de Tickets
- Abertura de chamado por categoria:
  - D√∫vida fiscal
  - Problema t√©cnico
  - Solicita√ß√£o de documento
  - Altera√ß√£o cadastral
  - Outros
- Prioridade (Baixa, M√©dia, Alta)
- SLA configur√°vel por tipo
- Status do ticket (Aberto, Em andamento, Resolvido)
- Avalia√ß√£o do atendimento (1-5 estrelas)

#### RF-COM-003: Base de Conhecimento
- FAQ categorizado
- Tutoriais em v√≠deo
- Artigos do escrit√≥rio
- Busca inteligente
- Conte√∫do atualizado pelo contador

---

## 4. M√≥dulo Administrativo (Escrit√≥rio)

### 4.1 Painel do Contador

#### RF-ADM-001: Vis√£o Geral de Clientes
- Listagem de todas as empresas
- Status de cada cliente (Ativo, Inadimplente, Bloqueado)
- Alertas por cliente (pend√™ncias)
- Filtros e busca
- A√ß√µes em lote

#### RF-ADM-002: Gest√£o de Clientes
- Cadastro de nova empresa
- Edi√ß√£o de dados fiscais
- Upload de documentos em nome do cliente
- Upload de guias
- Configura√ß√£o de permiss√µes especiais
- Bloqueio/desbloqueio de acesso

#### RF-ADM-003: Monitoramento de Atividades
- Dashboard com m√©tricas agregadas:
  - Notas emitidas (todas as empresas)
  - Guias vencendo
  - Tickets abertos
  - Alertas cr√≠ticos
- Log de atividades suspeitas
- Relat√≥rio de uso da plataforma

#### RF-ADM-004: Comunica√ß√£o em Massa
- Envio de comunicados para todos os clientes
- Segmenta√ß√£o por regime tribut√°rio ou porte
- Agendamento de envios
- Templates de mensagem

#### RF-ADM-005: Configura√ß√£o de Servi√ßos
- Ativar/desativar m√≥dulos por cliente
- Configurar limites (notas/m√™s, usu√°rios, storage)
- Definir SLA de atendimento
- Personalizar base de conhecimento

---

## 5. Requisitos N√£o Funcionais

### 5.1 Seguran√ßa

#### RNF-SEC-001: Autentica√ß√£o e Autoriza√ß√£o
- JWT com RS256 (chaves assim√©tricas)
- Refresh token com rota√ß√£o
- Rate limiting por IP e por usu√°rio:
  - Login: 5 tentativas / 15 min
  - API geral: 100 req/min por usu√°rio
  - Emiss√£o NF-e: 20 req/hora por empresa
- CORS restrito
- CSRF protection

#### RNF-SEC-002: Criptografia
- Senhas: bcrypt (cost factor 12)
- Dados sens√≠veis (certificado digital): AES-256-GCM
- Comunica√ß√£o: TLS 1.3
- Backup: Criptografia em repouso (S3 SSE-KMS)

#### RNF-SEC-003: LGPD Compliance
- Consentimento expl√≠cito para tratamento de dados
- Direito ao esquecimento (anonimiza√ß√£o ap√≥s 5 anos)
- Portabilidade de dados (exporta√ß√£o JSON/XML)
- Relat√≥rio de tratamento de dados
- DPO designado
- Termo de uso e pol√≠tica de privacidade

#### RNF-SEC-004: Auditoria
- Log de todas as a√ß√µes cr√≠ticas:
  - Login/logout
  - Emiss√£o/cancelamento de NF-e
  - Altera√ß√£o de dados cadastrais
  - Upload/download de documentos
  - Gest√£o de usu√°rios
- Reten√ß√£o de logs: 5 anos
- Logs imut√°veis (write-once)
- SIEM para detec√ß√£o de anomalias

#### RNF-SEC-005: Backup e Recupera√ß√£o
- Backup incremental di√°rio (hot)
- Backup completo semanal (cold)
- Reten√ß√£o: 90 dias (di√°rio), 1 ano (semanal)
- RPO (Recovery Point Objective): 24h
- RTO (Recovery Time Objective): 4h
- Testes de recupera√ß√£o trimestrais

#### RNF-SEC-006: Prote√ß√£o de Dados em Tr√¢nsito
- HTTPS obrigat√≥rio (HSTS)
- Certificate pinning (app mobile)
- Valida√ß√£o de certificado digital antes de upload

---

### 5.2 Performance

#### RNF-PERF-001: Tempo de Resposta
- P√°ginas est√°ticas: < 1s (LCP)
- Listagens: < 2s
- Emiss√£o de NF-e: < 5s (s√≠ncrono) ou notifica√ß√£o async
- Busca: < 1.5s
- Upload: progressivo com chunking (10MB chunks)

#### RNF-PERF-002: Escalabilidade
- Horizontal scaling para API (stateless)
- Load balancing com health checks
- Cache em m√∫ltiplas camadas:
  - Browser cache (static assets)
  - CDN (CloudFlare)
  - Redis (dados de sess√£o, queries frequentes)
  - PostgreSQL query cache
- Database connection pooling (pgBouncer)

#### RNF-PERF-003: Otimiza√ß√µes
- Lazy loading de componentes React
- Code splitting por rota
- Image optimization (WebP, lazy load)
- Pagination (20-50 itens por p√°gina)
- Infinite scroll para mobile
- Compression (gzip/brotli)

#### RNF-PERF-004: Processamento Ass√≠ncrono
- Queue (Bull + Redis) para:
  - Envio de emails
  - Gera√ß√£o de relat√≥rios
  - OCR de documentos
  - Transmiss√£o de NF-e
  - Importa√ß√£o em lote
- Workers escal√°veis horizontalmente
- Dead letter queue para falhas

---

### 5.3 Disponibilidade

#### RNF-DISP-001: Uptime
- SLA: 99.5% (tempo de inatividade mensal: ~3.6h)
- Manuten√ß√µes programadas: janelas de 2h, hor√°rios n√£o comerciais
- Notifica√ß√£o pr√©via de manuten√ß√µes (48h)

#### RNF-DISP-002: Monitoramento
- Health check: /api/health (HTTP 200)
- Prometheus metrics:
  - Request rate
  - Error rate
  - Latency (p50, p95, p99)
  - Database connections
  - Queue size
- Alertas via PagerDuty/Opsgenie
- Status page p√∫blico (status.seudominio.com.br)

#### RNF-DISP-003: Disaster Recovery
- Multi-region deployment (primary + failover)
- Automatic failover (< 5 min)
- Database replication (streaming)
- Testes de DR semestrais

---

### 5.4 Usabilidade

#### RNF-USA-001: Interface
- Design responsivo (mobile-first)
- Breakpoints: 320px, 768px, 1024px, 1440px
- Material Design 3
- Dark mode (toggle)
- Acessibilidade WCAG 2.1 AA: